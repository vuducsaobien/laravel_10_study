1. onDelete('cascade')
    - Khi xÃ³a cha 
        (Table 1): CÃ¡c báº£n ghi con (table 2) bá»‹ xÃ³a.
        Khi table cha - table 1 : cÃ³ id = 1 bá»‹ xoÃ¡
        => á»Ÿ table con - table 2 : CÃ¡c báº£n ghi nÃ o cÃ³ column table_1_id = 1 sáº½ bá»‹ xoÃ¡ tá»± Ä‘á»™ng
        - CÃ¡ch kiá»ƒm tra: XoÃ¡ id = 1 trong table cha - table 1

2. onDelete('restrict')
    - Khi xÃ³a cha 
    NgÄƒn khÃ´ng cho xÃ³a hoáº·c cáº­p nháº­t báº£n ghi cha náº¿u tá»“n táº¡i báº£n ghi con liÃªn quan.
        Náº¿u table 2       cÃ³ báº£n ghi table_1_id = 1 => á»ž table cha khÃ´ng xoÃ¡ id = 1 Ä‘Æ°á»£c
        Náº¿u table 2 khÃ´ng cÃ³ báº£n ghi table_1_id = 1 => á»ž table cha       xoÃ¡ id = 1 Ä‘Æ°á»£c

3. onDelete('set null')
    MÃ´ táº£: Khi má»™t báº£n ghi cha bá»‹ xÃ³a hoáº·c cáº­p nháº­t, cÃ¡c báº£n ghi con sáº½ Ä‘áº·t giÃ¡ trá»‹ trong cá»™t khÃ³a ngoáº¡i thÃ nh NUL
    LÆ°u Ã½: Cá»™t khÃ³a ngoáº¡i trong báº£ng con pháº£i cho phÃ©p NULL (table_1_id pháº£i Ä‘Æ°á»£c NULL)

4. onDelete('no action')
    MÃ´ táº£: TÆ°Æ¡ng tá»± restrict, nhÆ°ng hÃ nh Ä‘á»™ng xÃ³a hoáº·c cáº­p nháº­t cha sáº½ khÃ´ng bá»‹ kiá»ƒm tra ngay láº­p tá»©c
    Quyáº¿t Ä‘á»‹nh lá»—i phá»¥ thuá»™c vÃ o viá»‡c thá»±c thi cÃ¡c rÃ ng buá»™c sau Ä‘Ã³ trong cÆ¡ sá»Ÿ dá»¯ liá»‡u.
    Trong Db transaction

-------------------------------- Relationship Model --------------------------------

1. one to one
    Sá»­ dá»¥ng 2 table User & Finger
    XoÃ¡ table_1 trong DB
    cháº¡y php artisan migrate
    XoÃ¡ column migration 2025_01_21_000001_create_table_11 trong table migrations
    php artisan migrate:refresh  // refresh id tá»± tÄƒng trong DB

Explain - one to one ; cha con nhÆ° nhau
    - Má»—i User chá»‰ cÃ³ 1 Finger      - MÃ´Ä© Finger chá»‰ thuá»™c vá» 1 User
            ONE                     -           ONE
    - Náº¿u thÃªm 1 báº£n ghi finger cÃ³ user_id Ä‘Ã£ tá»“n táº¡i trong column user_id trong table finger thÃ¬ khÃ´ng táº¡o Ä‘Æ°á»£c
    - Table 1 : cha : User
    - Table 2 : con : Finger

2. One to Many
    - Sá»­ dá»¥ng 2 table : User - cha & Phone - con
    - 1 User cÃ³ thá»ƒ cÃ³ nhiá»u sá»‘ Ä‘iá»‡n thoáº¡i - Phone (Many)
    - NhÆ°ng 1 sá»‘ Ä‘iá»‡n thoáº¡i chá»‰ thuá»™c vá» 1 User (Ones) 
    - Sá»‘ Ä‘iá»‡n thoáº¡i lÃ  Unique (vÃ­ dá»¥ sá»‘ Ä‘t 0123456 lÃ  duy nháº¥t)
    http://localhost:8000/oneToMany

3. Many to Many
    - Sá»­ dá»¥ng 3 table : 
        + User
        + table trung gian (users_products)
        + Products
    - 1 User cÃ³ thá»ƒ mua nhiá»u Sáº£n pháº§m
    - 1 Sáº£n pháº©m cÃ³ thá»ƒ Ä‘Æ°á»£c mua bá»›i nhiá»u User
    - Äá»ƒ Ã½ viá»‡c trÃ¹ng láº·p cáº·p column (user_id & product_id)
        ( CÃ³ 2 báº£n ghi trong table trung gian - users_products cÃ³ cÃ¹ng cáº·p giÃ¡ trá»‹ user_id & product_id
            id      user_id     product_id 
            1         2         3
            2         2         3
        )

        + TrÆ°á»ng há»£p KhÃ´ng trÃ¹ng láº·p (table trung gian - users_products khÃ´ng thá»ƒ cÃ³ 2 báº£n ghi nhÆ° id = 1 & id = 2 nhÆ° vÃ­ dá»¥ trÃªn)
            - Sá»­ dá»¥ng unique constraint Ä‘á»ƒ ngÄƒn cáº·p user_id vÃ  product_id trÃ¹ng láº·p


        + TrÆ°á»ng há»£p KhÃ´ng trÃ¹ng láº·p (table trung gian - users_products cÃ³ thá»ƒ cÃ³    2 báº£n ghi nhÆ° id = 1 & id = 2 nhÆ° vÃ­ dá»¥ trÃªn - TrÆ°á»ng há»£p nÃ y chiáº¿m Ä‘a sá»‘)

        + Pivot cá»§a báº£ng trung gian User_products

4. Has Many Through (CÃ³ nhiá»u qua) - http://lar_10.local:81/hasManyThrough
    - Quan há»‡ Has Many Through Ä‘Æ°á»£c sá»­ dá»¥ng khi má»™t báº£ng A - chÃ­nh cÃ³ 
        (nhiá»u báº£n ghi) liÃªn quan Ä‘áº¿n báº£ng C - Ä‘Ã­ch - plan 
        thÃ´ng qua báº£ng B - trung gian - subcription.

    - Quan há»‡ Has One Through Ä‘Æ°á»£c sá»­ dá»¥ng khi má»™t báº£ng A - chÃ­nh cÃ³ 
        (má»™t báº£n ghi) liÃªn quan Ä‘áº¿n báº£ng C - Ä‘Ã­ch 
        thÃ´ng qua báº£ng B - trung gian.
    
    - hasManyThrough khÃ´ng cho phÃ©p báº¡n truy váº¥n trá»±c tiáº¿p cÃ¡c cá»™t tá»« báº£ng trung gian (subscriptions). 
    Khi sá»­ dá»¥ng hasManyThrough, Eloquent chá»‰ tráº£ vá» dá»¯ liá»‡u tá»« báº£ng Ä‘Ã­ch (plans).

    - Má»™t user cÃ³ thá»ƒ cÃ³ nhiá»u subscriptions (gÃ³i Ä‘Äƒng kÃ½) Hay 1 User cÃ³ thá»ƒ mua Ä‘Æ°á»£c nhiá»u gÃ³i
        Má»™t subscription thuá»™c vá» má»™t plan

        users (Báº£ng chÃ­nh - A)
        subscriptions (gÃ³i Ä‘Äƒng kÃ½ - B báº£ng trung gian)
        plans (gÃ³i dá»‹ch vá»¥ - C báº£ng Ä‘Ã­ch)
        User âž Subscription âž Plan ( User => Subscription => Plan)

    - Data máº«u báº£n ghi báº£ng trung gian subcription: user_id & plan_id cÃ³ thá»ƒ bá»‹ trÃ¹ng láº·p
    id  name                            end_at                  user_id     plan_id
    1	Sub 1 - plan A - not available	2025-01-15 00:00:00	    1	        1
    2	Sub 2 - plan A - available		2025-06-15 00:00:00	    1	        1
    3	Sub 3 - plan A - available		2025-06-15 00:00:00	    1	        1
    4	Sub 4 - plan B - available		2025-06-15 00:00:00	    1	        2

    - So sÃ¡nh
    hasOneThrough & hasManyThrough:
        KhÃ´ng cáº§n truy váº¥n báº£ng trung gian (subscriptions), chá»‰ táº­p trung láº¥y báº£ng cuá»‘i (plans).
        KhÃ´ng thá»ƒ filter/sort báº£ng trung gian.
        Náº¿u cáº§n filter subscriptions, pháº£i dÃ¹ng whereHas()

        hasOneThrough & hasManyThrough â†’ KhÃ´ng cáº§n truy váº¥n báº£ng trung gian
        Máº·c Ä‘á»‹nh, Laravel tá»± Ä‘á»™ng JOIN báº£ng trung gian (subscriptions) mÃ  khÃ´ng cáº§n query thá»§ cÃ´ng trong model hoáº·c controller.
        KhÃ´ng thá»ƒ filter trá»±c tiáº¿p báº£ng trung gian (subscriptions) báº±ng where(), orderBy(), vÃ¬ Eloquent chá»‰ táº­p trung láº¥y káº¿t quáº£ cuá»‘i cÃ¹ng (Plan).
        Chá»‰ cÃ³ thá»ƒ filter trÃªn báº£ng Ä‘Ã­ch (plans).

        hasOneThrough() â†’ Láº¥y 1 báº£n ghi duy nháº¥t tá»« báº£ng cuá»‘i cÃ¹ng.
        hasManyThrough() â†’ Láº¥y táº¥t cáº£ báº£n ghi tá»« báº£ng cuá»‘i cÃ¹ng.

    manyToMany:
        Cáº§n truy váº¥n báº£ng trung gian (wherePivot(), orderByPivot()).
        CÃ³ thá»ƒ filter/sort báº£ng trung gian.

    5. Has One Through http://lar_10.local:81/hasOneThrough
        Supplier âž User âž History
        history chá»‰ cáº§n biáº¿t user_id lÃ  Ä‘á»§, vÃ¬ user cÃ³ thá»ƒ cÃ³ tá»‘i Ä‘a má»™t báº£n ghi lá»‹ch sá»­ liÃªn quan.
        hasOneThrough á»Ÿ Ä‘Ã¢y sáº½ láº¥y má»™t báº£n ghi history duy nháº¥t thÃ´ng qua user

        VÃ­ dá»¥ Cáº¥u trÃºc
            users	history
            id = 1	user_id = 1
            id = 2	user_id = 2
        ðŸ”¹ Chá»‰ cáº§n user_id lÃ  Ä‘á»§ Ä‘á»ƒ tra ngÆ°á»£c supplier.

        hasOneThrough, má»‘i quan há»‡ nÃ y hoáº¡t Ä‘á»™ng theo cÃ¡ch má»™t Supplier chá»‰ cÃ³ thá»ƒ láº¥y ra Ä‘Ãºng má»™t báº£n ghi tá»« báº£ng History thÃ´ng qua User.
        $supplier = Supplier::find(1);
        $history = $supplier->userHistory;

        UserModel cÃ³ 2 relation ; History Model cÃ³ 1 relation ; Supplier Model cÃ³ 2 relation
        A. FK
        Table Users 
            cÃ³ supplier_id 
            => User Model (1)                                   => Supplier Model (1): 
            public function supplier()                          public function user()
            { return $this->belongsTo(Supplier::class); }       { return $this->hasOne(User::class); }

        Table History 
            cÃ³ user_id 
            => History Model (1)                                => User Model (2):
            public function user()                              public function history()
            { return $this->belongsTo(User::class); }           { return $this->hasOne(History::class); }    

        B. Has One Through : Supplier âž User âž History ; tá»« Supplier thÃ´ng qua ($through) User - Ä‘á»ƒ láº¥y History ($related)
        => Supplier Model:
        public function userHistory()
                                        $related    , $through
        { return $this->hasOneThrough(History::class, User::class); }
        => $supplier = Supplier::find(1);
        => $history = $supplier->userHistory;

- Docker
    + XÃ³a háº¿t cÃ¡c Images, Container, Build cÅ© á»Ÿ Docker Desktop
    + env: 
        - DB_CONNECTION=mysql
        - DB_HOST=mariadb
        - DB_PORT=3309
        - DB_DATABASE=laravel_10_study
        - DB_USERNAME=root_abc
        - DB_PASSWORD=root_abc_password
    + docker-compose build --no-cache
    + docker-compose up -d
    + Káº¿t ná»‘i DBeaver:
        - Server host : localhost
        - Port: 3309
        - Database: laravel_10_study
        - Username: root
        - Password: root_abc_password

    + TrÃªn Containers Tab 
        - laravel_10_study                  
                                                Images                              Port
            + nginx-1                           nginx:latest                        8000:80
            + mariadb-1                         mariadb:11.5.2                      3309:3306
            + laravel_10_study-1                laravel_10_study-laravel_10_study   8900:9000
    + TrÃªn Docker Images cÃ³ 3 Imgaes riÃªng biá»‡t
        - laravel_10_study-laravel_10_study : latest
        - nginx                             : latest
        - mariadb                           : 11.5.2
    + TrÃªn Volumes Tab: laravel_10_study_mariadb
    + TrÃªn Builds Tab: laravel_10_study

docker-compose exec laravel_10_study bash
chown -R www-data:www-data /var/www/laravel_10_study/storage
chmod -R 775 /var/www/laravel_10_study/storage

touch /var/www/laravel_10_study/storage/logs/laravel.log
chown www-data:www-data /var/www/laravel_10_study/storage/logs/laravel.log
chmod 664 /var/www/laravel_10_study/storage/logs/laravel.log

Hoáº·c excute vÃ o Container laravel_10_study-1 cháº¡y cÃ¡c lá»‡nh trÃªn
php artisan key:generate

- Url
    + http://localhost:8000/     * Laravel web browser
    + http://localhost:8080/     * Memcached UI web browser
    + 
